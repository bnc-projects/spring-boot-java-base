language: java
jdk:
  - openjdk11
dist: xenial
env:
  global:
    - TF_IN_AUTOMATION=1
    - SERVICE_NAME=spring-boot-java-base
    - VERSION=0.11.13
    - AWS_ACCESS_KEY_ID=
    - AWS_SECRET_ACCESS_KEY=
    - AWS_DEFAULT_REGION=
    - KMS_KEY_ID=
    - ROLE_ARN=
    - STATE_S3_BUCKET=
    - STATE_DYNAMODB_TABLE=
    - KEY=
    - SERVICE_KEY=
    - DEVELOPMENT_ROLE_ARN=
    - PRODUCTION_ROLE_ARN=
    - SPLUNK_URL=
    - secure: QFLxq6/aFRdQqLbR5NWDAPpnlzk5AQ3bRaYH+uegZaA5qMWvNNEoBjE5yvAJKiOe6jbqW7vqnmHFUSaMQS9gpL8O0r70rW5eswb8QUa+tSc+N2dluzCMp2+Fnj/xk8sAq+ieo5B5El296aLd+9gFK1xnjkORSZHGT+GIXxFZgqO/OCO9TETWuPtDaOkygZvPdBOLs2MItVrnBfWSUL5e6uhFn60G3+E3q3P44reesrcWyyv1x0QM91GsYm7pUVH5gW6K1vptArpW6+S5At1QtGgaLQj+6rY6ywqkOusSgFlYXrGrTGeeOiig8xKTKRQVX1myXWSVCUfiJcLp09rv2zfveQ9lmB42F+GgaocKv8FuIC8RDb4v3qdV3svFB0KpZfOHrdOW9cvTciMyIhzcF2UNui7pUkP5aMdruApAoSxzQP1nbl/lWcacHyoShibXSMw/GYgIGik2s8TY3B3J9secFkMoVgZD2qcmij2+hbTOmVnI3/ocnHdjRfe9Z8G7+P6NlMJ4AN25BglLMJaz4hvjzP3X50PUhPhorYtA9i9WB5cH9TWxnhemcerQjPsHFin2+gKLqEDrRZ+kPNkQiOXUKcfQNN80YaI0PTS4N38sMdluSAKWb6upwvWkmlZcOVZJdoa2s24lNyq2bCdzpmcfalFAZwKszHwKMrlmVgA=
    - secure: tmIuWwh2CTYUrg1xPLjaNEQST8KKCsw/i6PhaEmamojeDdw+nEFSXm+Yyf3wBxSPI5sLC42lIb2dKia0vcF/V1oK8/V1D/b7VbdKU3LrBKYzqKbL3Y/R/LiirvGrdG/6C9Ai3ET0cUd+oqffCEi/CWRDY9xLdT6tYuMn829xLLZol2rA7ANDP+znGPqbhG9oXAwd5Xffkf5UGKaAtsghuC9eo+F+sKXAU+12ASqivk++D3oiIz/41wIWb6tFkuAsqKvFrbHysd6iTrZjKYTVhQ9aRcQCtPEhS+9FyYe71lhaHW8r5vb1+e+uh0dq2ye6aAPVZx0T1llHF5TvcbF6rYNuAqEbi5bYTr0iPQ3yUy8mH9RWfR0OpuiBNEqdfW1yuyDUm3IURB2CXrnpjgqcntMrizs5ukP9ltqLoAp8YfvtiM7bYrYPHVfyzVjrt1R8FeaNLZtQEk3VtSnO1CwZnD80rQ1YwkpN6jq9xd1mpNCIku96KjVMdJ/lwo1mNhUqDBO4+X5bDFG1j0zBPWvFc0FjQnttn6EJkx+c62VoEDFao1Yu4N7w8qfgxpNaA/j4xeEr8IRp27XvlZc9f8XYFNvmVtZK+GiPOKFnFCZ5BzJKdV97Ma1xRUQbARDG4aqoyZYBBoHuRRGaq/Gse/ZGIPoYS5etcRxAjEGOONP8rLw=
    - secure: XoxbVPpLStp/Rh2Dbc1MC/pgZANIWSmXSgtA1mZMGCKh2FayvtkC4gSmaQy/P+HbCSrppdKrKqflUNG2T+ZU7K7rT0XB08onOSAhXjGRHtgZbKHWtWneZ5lQdKytbpxyoVG3CbenOTRStuC45EyO33wL0mDcyA3HFeosZefiOFp95FP8aQ52zj7q6blbId767GobGkjXVEKtv1m7Z3TyhDLvlMPgM3th+Dn2vo+uZSx3EvBtbTDjXW7TEI3wAo/vCLdyBrE+ARmkHv+kJjrnlEAh496qIs2NlEohDH/XqQb5GTcRhT4SC/SSeKS8qkybzXtdt7XtBO7XbGHGYAf5gWDVNjsnrHMz8u+edsHTtasrB+QJelYc8iTVjIH9KWAtV8ufD9c9Fk8KQLzpVr/88BF7VQTMBTjRQHOPeGAQnZMmYXiv3b9VL9HZBrnKS0vhuvJRIYtuT93aildK2VDGsvmDX/ofKBkZiQePU7Vq8LHvnGUQxkxo/b2WGfcnTt23X1R8FcKQgbrP9mA1HOlAA3nbVTGkZJzNoXbUtZt4sZR2WHtxNpQRsVaXrRPYATHu8UStfd138EaLeAPuM4EQYTKA/9cOf7pmxtOpypYsTmkIuzxLdFrw3aniagZFQ6SDbVakbPV1BOTr5K0jZKLeeFG516MUKLk+CrIwyALIEbY=
    - secure: nkg6tw+1yVyky1PgDcMrj4HNgPTTQLYDbi+SHvyCxqsvcjcXsDMmh7kFHX4KiuaOIWcXKg9+lQ2buUy8qOwj1lPXbEO28ZYU41jZNM1Y4LXKOLe2d0Lz5r46LF/tJOok8XUerHdVUM/BxmXiFdSa8r2C2Or3khxf9Dqdu6nMvYmBP2s7g0ABZDNsqaQTj8iKA7XfgCiq9c9f0mDThQZ0fv79MPDGA6gL5EfkBhQ1DFd4MunJu9oxQ28fsl0vb/imOhMLTNvdcRVEz1tL/PJ5/MTcOgokmrhZ5IzTk1bbKOfaYw5s6GOGrDK0ZyQq8031P9sLj4c2HtY9W5ntT8x0utBYI390fHuYRwx2M9w9KhqikBxMPg9srd4kkG7vlJGJUf+9jS4pt/KP8TYzC9ryK/9ONz/Bys1LFN7lTHJqAZBR5cMpLLwuiXuIrDD/SL0yLWsnlMUAc0XU7CkPEnYvFBoaoX/MObO5Fy6rSXdDkaIrpWYD4AUXj8PEA/b9SafLxjmp68CtAqhQ+Kv0stAFDYbW3pW+edBKCQGtnzCeNWLK6F7hP6oqugHns8uaWdYx+vFyHrvYAAfb6ZWFnJ2umqHQbdDmgl/iwPlZsey1Z+1GUzPFnKv1B+L6VjsdPFpUlx9w7LNy9q0nxh1FTbRwlerYdGXs5ir3qjKo42wYJ/4=
    - secure: rsQY9ftjfAY7q30Eu3eKJw+iOhFZNouV75HcXOiaMSJ0gqypQ3Lhv1vKSEQefV/EJIojEcxdJ8NRF3dyIrgKJvf0YezzSjzDleMRcP+AmmuQyeGqd5MYJ6kl8BRLerWWAuuc+bp2dLw/KCanXrDwh7bp2/V9pOTTdBfzBFG/nPrR40CLkI7AQaEccuHVb2ZphlzSf9VOzEYlBzilXuJvRkl+/GpyEE170O7jkOBImIT8OXnO1UXzzRUymZCZs3bYTu9nIknpLeVa0ba+VHla/dlSwFFJY+zs0v83lsQ+CErkMMikPQy7j5UlIKNF8X6Zubu0D0gOP0+PwWXsBbB5/E+YCyHNcox9mzuzsDkIdBO9tABE08Zhx/UVqU5KKnkIshMIxNFbMnXgA/rsd4NyT35onWIEoom13Nar/xJpIhnWSXTQhHzamjIjIA3Oj7et++Rt36sqZNqxkGQJqvV0fE6+khJ7Y8SCiaPJW91GUz9Xdx/8FW3QMT2UeI4MpX0VlIlkBZrhMO6v6gAp/zOib1jiuKCK1ZJTYkuYPLUwEzVx50+uRB7IxHT5mKeR8IfPktWxyYA/YRL0XHLkgaV7S4v49/3ReF3+KmPTHpmKnOq5VoEORAegcqcBFgATtddDTC4c1kuwjJzdka3qnBuWCWpm8jySzBQLilrNpKP+bW8=
    - secure: AqCThrzOrsP80XztRjyLS7ntP7h7KZqNv38tXLedMzBQFni4Wo8b+pOkcSvuOe/aXsX9h3kzVrzl36lS4S9seNLaLN+ZRcg3YPzSm3MlHWcneY+RvXWhUh+B51z7IUQcSQ24Mez13Udm6aGBEokDVNCacfDNk2J8c+0HB/KK9DTAvspCnFv8W2Qo7jvkQbvjVbr6RnadEXaWEuvtvfr5cX17HZPwco6+hwpGYOgKjVkeDj2yW/VzXaexzq4LLbRJdEcERxppe84OBG3IigYtVsASG94baAau+SfNq3oLQhK7RdK9lHsRONwX5kAvvM1g4AFjs1Vqtsy+jjtQUCE+hsJSm9akBqqFnOUjMDIJicdeHJptHYEZ77oT6R40pw+b5ZJGT9r2o5FJdLbygQkJ4VqwyT1lErFS6EX4apMNX1J2zx5ieiXmgh1DCeVgJSaVP4q1dnvGowfJhL7RxNww6PWHZWVzyi+x79/q8acjr/Y2+RkZzdk0gssR++4vbadRFwXsek+hfXVYIrRQfe5oEyidm99VcW1C6OfCxkXBOjqMAKnjEnUBf+B6p68pMEkBzd3/LhPxPTXEM3LXo1c6H4Jp75n/W4Wg+At8Wq/HnR1Vrojm/+rS1hEJV7GW3XxgTuHcRFueJpwlMaSbpfY9HmM0jsyiObPdsq4CJMUHjrM=
    - secure: kqk0O+HOad7JpwU8kaCMDGSIXMpif/IxjoXhIwzfxBMvCrM8BsZoypbu0NWlTGE0J3MBdWWSFp6RVjt76bSBn0lx9vtv20Og4AAJYzw64pdVVEpjvKux3RtJ1AiwECKVefWX2/wrBP9GpkO2RY+MABSfFeBOvB2OBMX3yORgFdWI9x8/+NYhtjIw9+BT8BjOCCz8j7EFag/klZlPyM2nDyyVmVE+WkbRQpwowWNDONFfVenHGJ+vLn7R0nsScMvKeAg8L4DRAvK6O4v9M3klvyVVNIyyK1OBkRq4/UaAcrQrnKjcHqspux4FQFiGV3wR00/4Z4zzb5vrCUjzG5B6GN2kBbKl6YOwUW4YvUZPJuObOMFlxkQTaGG/e7+UKD/XErAXBFv0eJxsv6zdW763Eob7ALLo7MOd4uhezFwqFBcbJcY9SM033/3B4iNrT954JrB8wMgDQtu/QG/rBOzhJi3NfSRywCn8k2o1gCCWJJVPfd6I6V6zyNSWZyVBIllHx773jcrtUKOc+TtoQ27FYKOz9XNtWBidKkt/a9PKYf8sxREGGMNw0/7KZ1R9rJMXRmstxIkw3Svt7WlOYCpQM9nEtLaZPyF8q3pLGh+Jo4yi9egCLnXLFfYvVUe/3mGHMUw6qOwkZzvqce2Owb9/c/YYAX5+e42RHtbn+r1bZss=
    - secure: WlgRNrhZNfvu2gwVdoUoxM86nNV7Cb9hK7ZQ6gUgR2zuM7O13aR4yXCpJT1ok8XuGj0oTtfmoqcKoXhHa0KjBVmFMCHrslkxmNTb/4aLDDJz+v/tck80d/e9kH6c3hinD2rC9xhyK7rJ21ORil8fe4+aPv5wQnu2xVTvtUg/deo/STQLbP3dIfEDS71vDq+YdjrxtuCB2/3dFN5OR+xopO3uj6lyZXglNWdYbt+ZLyZA3z5chrCmWdBWdyUbIyO3Na2C7MUVDfYzflcja7ppkWqk6UwESPNiPqAGFxdFV867qUB6kkTBtdyIgkAQzLGP5HWAomF4FRqrWMKz8N1Op2rdgAwm/121ClW76SlO1qj4HJ49BkS5iCkjsnXvX/wWC9iSYtOdcBSQl2PHBWvHJBktvJF5AjTvBCXHrZ+BqlRjkLwuO4uByzFUv+boO2B7w0I81IrckyHF8eZrWzojivdF0/VNmB61dwp2Ld+12h2JgghFk7ZiH0WvBwZtp/H/7/6u2Qb6ctIusuOadogV/+FjERiA8sxAAmcPQ0l2XnsrcpV7CwHGC4eM9ooz5mpvwH6eFO0Sc+HuoUh913vZqfqTUrh3adRUVxArw3gh+QorynnN/RWZ4VUIcdxnUaXFhTG8PMxZSDxdIBnlMA6UK9Cm6D83N2t0bbzadktWzOg=
    - secure: vBYFX0YlfvUhWm0W1sQxbt+Aq2Ab+OzJTSJwbncL+eSPZxO9oRnbQVug1O4nvz1UmjUxWzE3/Du4PPWK4eavw7bLZtGgMqXNTPiPvIS59cXZvRtF7LP9g122l4mTeveiPlowpBi7rl7cTaOPrO5LERv1ZhTCdClI0rW4qoTMjfaKhi2Mo8UtbFTXFy2HLnV+Vn8ETOUcqOoNdH1Q3kZk1lTL03dAtaMJ67I4EnTgCvw7AG7JtoqrplAIQ2etB+mO0zaVEdjLTQ15dlK6Ib+BrQ/s8hH2p9f2f8vxOVpwrKHljfApsZAr36VhSCl/Nnl7TbMHS9hzT+BfrL1fHXhfO0BWYHFRDIww2EEbGIPl4uBH8H9hJvJtXSLvWZWywv/5APmY/EF5YSoDPqqK75cWhLQAXaVaNSTTFU6We7UfyooXpPshZ5tTF9DHssPp6fAXYBZx9hwKtf3+ajmpV905aSFkYvfsrMYMhmK5rHRFsJGpLu99Chrb86FuPl1/K6ACNWiBUcfwd+rZLgrenI7PVUXHNvKvgJ/6Mn7+5cnC8YfyzeV8UajQRzSJOtle5RIg1nc4m5sy9oZ2gt8+hm4e1W56b8005rrEaVpaBhZKGXjujGZpvcXwXXo/bxsAttZFcBYWppSsDkn+Cy8NXPNdNz0HxGdFRnQuj/UJNO7pi58=
    - secure: VBpfsxBmLytS8mdDSHeKRIPFC/QSV0uo/wPScbFDdm8aS9bRDBkAWtyQLdir7aSYyMswV4nphpwuJ8TR0KnLSMk97J/hr371BcLR5UFU+GwIGTx5YaS0nreSZekPX/LZ69uvji/eFZ8a0Gn63nknINrZRxGySwkepTH0qwJuRswTXNtqsBOVZUohzpNLzoti1um+fo4Kt/bqjMIE1UZE4+Z93qFqH3g4A2qHC9qA6H2Atzi/ir3Yq5vsy3bM91RWwAe4mng1OvzJHrRnGTrKGaLGFioLnz0ZdNwWvLjaG1T2fTF/HzUPPuLch4Ff1bmYLi+aZRMC5yWfB5EDpNvgKQUcVnVlixR5yI+xO0rr/szocAi1qLxj+xUHpO8ngyXQkJ/maUzgm0QD5AEi3Tef0OQBJBx23wJoBpHE+pUMDRJKis7WaTFqt2BNvkBKuTkSizoLFX7aD/+lHwmjeU+0soPTJlNp7goZwU8E++sT5N2WJR+/n+zVeogQDi/iCIb/FJrnT5E+geKSPkjD3fhU8LcHu3K8ygkkKnDv+QEd5LR6pRkGffhNv36nenis0KNmy1U0e0cH9tqe4XIJ9696xz6tQ1VWbokrkTETCU3s5P/9B9+32G8JA+mH3cJfgptTYh0cAMMJTKaPlb6HciJz/OE4ebaZhkYmzUFoHbEW8qI=
    - secure: lgZZrXtKwZutA0EHteUL4C+pH2kT8NcIOVPSPTt7vK/MouBkLcB/CONLQCq1C0M4K3k75ZJCluEg0G0G9gnvpbUH4f/voGaARxY5N7LKMCvnuK2UVQed5Ceh6VXMuGKt+xLMAoCwRliksI7L68uc2+1PujbmECD7aGocr/vXPe4NPqpw6YMPRqc1a6E8nOZESugmZ8wwwzm+tRwUd5zmzWKA2hP7GOeTG56/UpS315jib5rlbTCxFFYkcVLVXBzA57m07JMb0zHjl1MQGxfCCHhDu214SLvRTl1NkxAfqzNQKGdc80CK8qDXQzWnQXgo3Y9JUB7DV2G1WKk9tMtENYyfSllVk8jZTU52hyaFd+1xXhyyhnOauIszQJOqEV8upSGRxKsQ9CFyTl3hdQEJPQm6L4tqVoT362LNq5KA6N/gL7J7QqZl4O0L9qgiVzxBJAWotsVP0FPs4lR4nEUxqiwbK6i084Adj7w1OGXXlQWsVix0yCzgvMD0J1Raq/9cu5jROG7vlW69Y5PtMLNq6JeJmouO8OYHz29Q/NZKfXXikJ86kksm2ZiMOiy2NcgyyWtJSaUQgPSfKQ+m1WncS7F+a6JcsoDwcniGIO/8b44J8UOxiJ4bRLP0nTlGc//pk+4XiuX1GFqNDj7sA4dp/oENQZDOsv8OUnedbHl50Ys=
    - secure: p3Budl8I27/NBUeWLcTLpCkEcwtfxOQ6GZoEUyay+C/58iNP2j6ECaRdAACb+n6lfvAqZqxgQtSwuMdOQ23/k9EE5fdMLI7CxeudQyFiZLwslvF4MjhJbEl02CrxYEzdnJPCOQbXjNHqpKgZH8Ty42U6VFGLLx3VgtP6KPh5gNenjr+UkLg76s/kDE4WNO7ate812ykB9bjfzy9yyFmgI7Y4gjVyS3XBd8v3TWta3VLeAExc/GqJpjk91iByPlWyOu4GVgZJesCaHgAFXXIl0jDxtG+KsOXpVZxjhWbxP0IjbBJzH6wevMYHvIvHleFPL5Y0n4qj/13YyTukyos4WRexBSkDIxZ+HlDZjwNt6fNqxVOYpLREz3FfY2lER2C7u60bNl8zz9j6bFwo0No0SnbjyFHe+q0bMgr5q9p1uQ/4rc1pfeVi/rb2DaPyQCI+OOUspBjBDXvozteV/YcVNO84c69jpfF4LVkEW7fF6e94cQi95q4MfEpoqxSb2cyJ5tqMthF6hVEZuDQtcC9FjhacS47HD+faQaov9EYPm/sPD9voONZo9y6hCpujMmRlVOp4vS0jykBe9ZQtE9eQR3ZEqPqWVMND06WazRHPyI5VCQtXjMiS6ZUKEUP59+BYtnZadfbQvrXtQ/HDKf0TauaMwGUwKjxRQBo8D+FpqOQ=
before_install:
  - wget https://releases.hashicorp.com/terraform/${VERSION}/terraform_${VERSION}_linux_amd64.zip
  - unzip terraform_${VERSION}_linux_amd64.zip -d $HOME/bin
  - chmod +x $HOME/bin/terraform
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
jobs:
  include:
    - stage: test
      script:
        - cd deployment/terraform/ecr
        - terraform init -backend-config="bucket=${STATE_S3_BUCKET}" -backend-config="region=${AWS_DEFAULT_REGION}" -backend-config="dynamodb_table=${STATE_DYNAMODB_TABLE}" -backend-config="kms_key_id=${KMS_KEY_ID}" -backend-config="key=${KEY}" -backend-config="role_arn=${ROLE_ARN}" 1>/dev/null
        - terraform apply -backup="-" -input=false -auto-approve -var role_arn=${ROLE_ARN} -var service_name=${SERVICE_NAME} 1>/dev/null
        - REPOSITORY_URI=$(terraform output repository_url)
        - OPERATIONS_ROLE_ARN=$(terraform output operations_role_arn)
        - cd $TRAVIS_BUILD_DIR
        - eval $(aws sts assume-role --role-arn "$OPERATIONS_ROLE_ARN" --role-session-name "${TRAVIS_REPO_SLUG//\//-}" | jq -r '.Credentials | @sh "export AWS_SESSION_TOKEN=\(.SessionToken)\nexport AWS_ACCESS_KEY_ID=\(.AccessKeyId)\nexport AWS_SECRET_ACCESS_KEY=\(.SecretAccessKey) "')
        - $(aws ecr get-login --no-include-email)
        - ./gradlew check
        - ./gradlew docker dockerTag dockerPush dockerTagsPush -PTAG=$TRAVIS_BUILD_NUMBER -PREPOSITORY_URI=$REPOSITORY_URI
        - ./gradlew publish
      after_success:
        - ./gradlew sonarqube
    - stage: deploy to development
      jdk: openjdk11
      env:
        - TF_WORKSPACE=development
        - DEPLOYMENT_ROLE_ARN=$DEVELOPMENT_ROLE_ARN
        - SPLUNK_TOKEN=
        - secure: nXDs5kInVf6Ty/JIa42b61X+xNcU/PVHfJJ7y9YVRX3HYrbtzusqVuxY1n+JQxZyOo8oSPwmT7OE1muxDP7Hy8APZEdjj1g2r+fp7//0w1OzEFzhk0Gj9b+okc8FgK2U+PnmhQ4n4RmhWC8Qx6L32qiECXzDP12kPuCTHu3uPC4qHLBSVH3fQ04Jk7QyJO4l9kIMRwxyARJ6VsUzwSe5jyytXVikvTZZl/CQoYMGNjMg6B091bt3b2I6Fbkw4jsV0II1VFkQXylj/nnWn2D8ohNG5pfWN3283Ks8f7r3R/yLSqJKqTOMEq7drdAXHdGveXY77xAGURnNXrUiIfMa4UmHhC6cDeC5rliOwjQVTqdo6D9UfkJV+IpSLx6PAIFezQraYEhi/lmFRhrCmsFYLJ85TPGdjkv52tFByDkRWe8+aV/owPT5NEwKJtx9BX6mU/pMavRH8IsIjhbQzeAOVxmU7/MWsU8V7lzfLtHmljZdM9E8V5f3oyDSXkA4bkLJx4P/YBCWc04ii6KXLHqWQ5LiCObhXw972fkegPIz9tDpo1NhxrgEg/cPWg9svE3bXCnegyExvTWeVnTS10IhhAyzA+EBM9kZh6asdQCwGuKnpBxkQaKsGZzUgfFRPQ/mEe2pPlRBo54Qi8ku430QtDoRQxiHkjQdyZkW7wdkonw=
      install: skip
      script: skip
      deploy: &deploy-service
        skip_cleanup: true
        provider: script
        script: bash deployment/script/travis_deploy.sh
        on:
          all_branches: true
    - stage: deploy to production
      if: env(DEPLOY_PRODUCTION) IS present # remove the condition if you want to deploy to production
      jdk: openjdk11
      env:
        - TF_WORKSPACE=production
        - DEPLOYMENT_ROLE_ARN=$PRODUCTION_ROLE_ARN
        - SPLUNK_TOKEN=
        - secure: BXvYtV2Ek6kzoRFrkVrHRps7dee2ygY+XiV8pCZ+e23bRi6D/Ew8uZ/1FKwNV3XNO/blFyGiMMwDShnX9UFDXVvHV352t/lpw6w5+jEzPr4YM4duKKt9zd4oO39TliIziazQS3W7lR4z00MIQ1YJ3F6zJZsPgj6RwYgqlViBjUXASt28lUaJGT7aL795oLpU314N4DgfGqSDU/8sakgteq5zYF2qxwWEAd+4muhsj3ixBWQitukGML6KFtX4EYz6o6um7NKcC/STDvfSLjNKoxeV1XNyuIoWxqF/b9iDfhJOlaCSur3RruJoV+XjPrBpBfpjBFJZuyQ++OFxoYo0PoVzPxxPe6bGDVEz10QEG6BNfeWRDtiMAL862wSuyCt8wpJhxVfHEXffhi2Uw2FAzMCMfOTV7LYjfcwH9ZqoRJ1ZzxOEA6zejHquOiy26bIaclFa4/n2rurDs3IPlwAJMJWcI7V0+S7gDiwoO3GUFF0tgm6hz9zn5pexaGBu5Lptc50LI2XkBMHbG1dmnOVdyblTGqSnAkTIcS26ChjlTFScYs+BqGhzydMgV9ZUPjlgJ2a0C+y9sYbxeTy5kS9LxPnsL/9jCwQmLPnwjn+Icm7gDTb5Yfa1O7oqTEHTTZICDqrIuMy4/MN4IqMNb2LDZHuElFX9CyVP4NIGGLH6yaw=
      install: skip
      script: skip
      deploy:
        <<: *deploy-service
        on:
          branch:  master
notifications:
  slack:
    secure: S4Pg6XK5x3pfxldRNJVMuzLfPzKVsGdogr0u0r/pu5dpjJujoecsuDoPS8syej1hZRqJOxK36Ms+NDXRzHNK6w95X69kgwDjzoI3PoKmnqyBJIcgSueyNbm7KoQGgoKTOgEUHZ0A9JbcdH8ThBHUR8wltXctGd3kEp8KC3wSlXzDmLeFJPTqC8DMBmSC00nVL7LtXj4VdOwYZnERKErjjx5f+msOhCNbAXLr7p12O7ewHDhL1jaex4r4yzG8+oevDKYNgpHyd8BCsgsCnjiKewByiVB9q4GBjE6CN3c1VfKdWmPWwF4jgxsz8BqTjshM17msnRyXOaSsB6MG+gGMyNKwFVYEwlsAQyRl5i5IhvjIHVMZVcbon098CpNcpW/ZsWALVQSZUW8yBBVPfVs4gTI071R9hQvDWdHLEkApZpsD24tPwsXGdzupBceyqf3HZn9PDYnqMB+hDxSYmLoJRYqjdFxguUwZEYSRih0c+4npcCBO/QJ5m+4aoG2qJ7Zg10YPr3I/PU+kHKjMzvAME4iZ30CnW0gRskM7nVHZRVmR/vgweZDuo9GYXnOykUUur9S3OEhkEp6Ucmcnkv/DXRa5lU0gqpnfkcJv40UaqoxyypGn2U0dPHPCbYahvTu4QAAAkUU6RsJ3TlDhOg018lJVBBaLx+tXpTD+TpY7/XU=
addons:
  snaps:
    - name: aws-cli
      confinement: classic
      channel: latest/stable
  sonarcloud:
    organization: bnc-projects
    token:
      secure: Ehm9iNp6f5fBata+4mkkfwpUelmYZZAkmrakZ0jOsZn3Pw/e6+ZskxOWBdRZQxZbpsQ2QTxrunel4pNgjKpuj340OuDGQGb8it23VslTDuffpDguDkYVBe8RQER2TeJ5ZrcpYbTwNg0KUxwvvjSgbmwDogQkvXu6nxmGjcT+kcKMuVNBXSQrIPalKQNlq5Oga+IBfuqK0zhgRmsHq5LQVqjrn3dckXL7rtaqF7yXX8EIxaRXFzE36hjQlLB0b2OpT9ff6/Jx15kBgb0OYTwHOjhzg94UWljsW1u4Unl+B93drRV87HSmJN1kZZkzprixgvO+ERMaAwVsb3qqDb6qqhIS06uUZfmsV/lKOfoB2WEYA8KdS4oYUOuRULjrWBvhqA+dT/6QPHjSpgssVCfnuFsgw7vbyBuCZAifHmS0g9h/4+N40xYk4jw+L5jIDH72AdktD2o2qY+26lqw6XdxPPwKBrsBcElbYbfTdw/VMYlA9yoOFx5mlRUxhv0Jxt7u5ZD5FmE7H9XleTNnmO13dhcRfEZvUpEWa1Ccn5ueq/03kbXLIaZ6I0LM8ONK/qEqUmY12Ztf7QFs94HED54N62o+5fohbURsxVDE286VO1alUqgOVLOt7dd+X4JhDdu2ix4jHjPsan40eAy6e6FxFn4xsQF5BGPrFvDbCsvP6ok=
