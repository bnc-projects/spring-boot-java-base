language: java
jdk:
- openjdk13
dist: bionic
env:
  global:
  - TF_IN_AUTOMATION=1
  - SERVICE_NAME=spring-boot-java-base
  - VERSION=0.12.9
  - DEPLOYMENT_ACCESS_KEY_ID=
  - DEPLOYMENT_SECRET_ACCESS_KEY=
  - AWS_DEFAULT_REGION=
  - KMS_KEY_ID=
  - ROLE_ARN=
  - STATE_S3_BUCKET=
  - STATE_DYNAMODB_TABLE=
  - KEY=
  - SERVICE_KEY=
  - SPLUNK_URL=
  - OPERATIONS_ROLE_ARN=
  - secure: PHRCGODnGOluxGGzIAa8T/NqNYKuzIeQaY7Rp/+QMziEfX2E01imYUNuO6ZBVOASt5SD7Rniv26125yhloiInfJ25/WkEc1fAIJi8jF6B8Knh3SzXWsRBF7wpp7BGf70JmGfifcTN4qr3AN9cEn5pIchS/2ov6Zg0Dkj6JNS8pOEEfh4YYC8tMjoZdaIbyJzLo29Dx0pjktpRv5HIa9CVXQU2XnerrYNFpBAxXeGbSUyfgi+EP8SNpCRLfS+c1hVJx9xRrOFOzkxfY0VFLIb0A1qfscnj6cCdtDEbvIYXbM2ohtSg/NhPzDjdPqFiBGBziSH7xYsWO1JChxFEy/3Z3onmGCY66+BbxOxVx6Zgh/BWd+uKnOBSXfC/7ahDLrnIkHDP8Pn/KHANYl0ijMYsYKdAH16PkHkGsANOttrzX+OL6dOYQ2dnrpI+Q2Cy24RQei+mY/mEXLZ1nUzBz7duFLbUrTNSTu2joWItfwFt7/ceGBLwB0GIgSsFF8cG5hQUBM7FLyuyxoceiwqe+IV5FuRGECTelcMrXLiBG9SYZ5kouAOpup6P6nW/gEK40n/YmF3kWCYuZGcz/fkIWIScOncdXB048n2eWYQg76Jtjo1fr6yoQZrdh5awCiiRgEClYQSvy3g5ixRPgqTiEt94QWtuuWN7vxYG6nDUnKyHHM=
  - secure: QN3NB56X1LDEStwG8ekDIPjLQDzaRf9kPqXbGvVu5ng2Sh8KqfMRZ8vua8pE4ALyVGDJ6ncgfbhkxh6t83bmGkLR7GEdCQFUueKaNKe6cPpEZREXQG63QbR4eMDMnduW3GyMaVTYzVW4LdOiOeaFP9WfgFWa6rU/fjHAFlaL5GaijguF2rb31NTN2UHoRvVRtVeTXHcYRzbO/56dIPQxTigasq2Ze42xX4+5KvfHGtuhVKuB3MV57c0/Gp2xRH29xMbUT0yv9cWeuHTTC3LZQuU0FQ1ZGvZyOm99JRkMm2lDdfcyblSSYuQLpyr9pNtgn5nfM9L9dr0lep5v7SSpEzHOAY6wLckydagx11pkWi4lpmcNkMYzlD3Hbdmli+aPUPkZcMf/ac4w0SSjv+W5KSwFlOnrLTbeKOqnwQVv8n9vqEiAc+xdZbag3zT+Q3eTzZQU2nujsfUCv9yGQ1R5tFyx1fTHbJo/CO22ggVe7ZwxwoO9MeB2kanwDAzNHzEmTj0OFp2qI/gmVZ4WrZ0ISW1JR1MVuNpoyHJPXrS4zhJ81PsUUtJLGPP9lPViJ1tEfSYDJ1tSD7nqzrE0rxD9l45BipclxoorIjcXa1EMMAWCOOYsvW0W/zqUby5uE23o+dKjS9Q7HwWCBm6va28ZTNKhn2xN1vYVnOeGoCfRBQ4=
  - secure: VWi87kCeN2PL5Xrci2rqJ+MWohp9S2fb9VH5oKQzWpWdaoZgR/nIV5d70PsejTU28a2iKAHRzCUhWuy0VvyArP3EOYmd91DgdqwUxRGZM+ETRMB4ch3MazDgAwp1usEPsqDqIkKIKOY1v3iMVRhlgFWXO+G9PeUapqzAOimuWDO/TtCHRATTHEWl7cAGBefJTNnpL9Rx9I2wOhWDVFe41jsEhHRCeEFMggi8kB3ld3pGdC9SnP/xKKTJre0MKjvSLqDVlu/zjDRIjL1L4En8mZnA7K7KLA8XklaSUYMEqnkiSJBriMDrj/EX3UoTexD+2EYX8X22csPzm7Y7nsWLw6bBE77JUCGZN4x3aaX80urAfED4Ss6fpbCT2QY3ZFtR/HOBYcyGJBuYpKttzQE3UPhIueUFC9eOlKcXO7eSqCvWYrO/Ml7u8Jx6hTQsTDgjvDymfWquoyeUvn1TT1bdRKIOk8d3IsRuIc1FGD5rPCArVE7g0w2G/lILmU6BZ/1j+0Ds/htaBYMuCwRM/a9Nh4Q6FE4fYvMDVglIz0yuy9Jv5J+GM5Ery6wqdcsF6d+lqxtAkhi/titpviyXUdR+hFticCZxsUvkgnrqDd7ogD4bYrXWjCge+y1vwsDuxe5Xvw/YTZFQkxI+rntHLIzJFY82BwjIxydRXRHrXT5IpDM=
  - secure: f6LBoV5O6JOw6+sHjykpbdr/PMI/wheFH7KaW0CcEk7zGHKszXlddEhspqQoEbM3S6iPf/ZhyG2BoWc98UT7535z5rQNfFcpt0tTxMH4QG5ek8MiAnuK1D3QGmEU+oQ9MYhtVdegdTZPYxcJLIqZZRBK/g2bmQKiVzWuOazxKre06QpGiFBHprNLhZi0nylWLBjYw6tWRoYF7PUjt/dowyOXppuaO96m0PNYm0u8XHdgN0jPNHvdljtpbOnLO3btrFVC3flELt1XrWLFPD6BnFlTrr3iFqNx2OGcwcDviLFKqoPNvcQSr5+oKvSLHyklmUk1clKRbnisBxEwwRhZCD70wQtrIEoy9LyQMVi0lsyfvPh3IQi+oAho+NJW4tKTzBED6Vvt6XBH7rZQWS2xwRaS+EbjA+ph4U/OGp6OVOHFSEpbcAh7pCROUmsQyjpML33rrN8gT//aV7bVNQg1zu1p/Ak8QMqpQW8kJZfjr5PoWLflsHxNGE99U6QGKS5Cm+xeyM6RgL2EpdA6FoewANBsjMWpijD3Q83IaZ9Wg9RdbCYfcUoURa7t7RSqBimrdoAfLehjFEDN9s/zC08ccXI69x2akvS3B3YukoiJ/E5DLd8ev5I82rD5S5InnWShp7N2sU4nz2kPwFUWhG5ohOOHqIJSULenRIdklP2wqQs=
  - secure: nrbTBX7lI4X4CdHGGZIZ8JHwA07EXvm08awkHFNAp8V9rHp9Lm9vV7Kph/K08KTz/VarIeTJScvdBj+g9pESry8PYCVsIzsuKOG5b5AARoOBVACHgnx2tsKdSrXvrqBW+ABSoyXdyrpQBRn0r8oDMGdzYRAmEF9xqz+ltTMHPV4TAW5duy/InpEkKhAfiy7JWFoi8JSZiJTEuNXaBmZGXoJOpMuWQRTa69wlb5MbMyjW2gDctzJVdd5zXPVtJ4WGNugkBjN5zfTmXYEHNWZAyba+CZAh/1DAzzFHybR3atBipIgMSHEIoio5RHSZhb5x9ZsrcwiZIH5AJWNYHQjmTHaaJSBXjvTQLnJhI4KRhNB3O0heum4hF45hVBbZ7RuvdkfHIcLMbh7U4nrQn9BbzS6kcdaKeoAIQQzpdhxbmYYo3XbeDU6oPTIn7qRuLYBMPlGqUQwTYLC+C781fma23UgysD0G5q/eD44US+KH54MtRshA1ndZ9YkPG97sAybgaNR8EsqF/j9vJpj3Q/rAW3dIeTLrQ/8Kpn7/8j9U9pQmm+aqO3mjQOmE/Xj5HqHCVIVXzzQjM5gEtewanzAUaLRTN7iePuwJx7/RcD8bFe2iJpIpm96ioigzi74JQ9C8YEKMqmbxj89n0nUCSNs6E6hwBjodCSYCWkO1WmCV+Vw=
  - secure: t68Ntiwhx6wU97kX2vyAoPFeRQX0OQQNDjKDf6d4boW7BLw2t0kj/g55obSRo4DcPGDjAO80oLeMQMPOXzNawtIVWt8kUy3LUpYwYlVGh4w5fjXJF/UP15XvZlajk+Vk+Z/n0h7b7H343SFUKNEqxyQZ5O43U2FpuJxolEzqAkp16pWTdjDUq4b5VAkiKPBXfjxojM3bJ+T4zL1WNsxZMYh/buYjouJNuoY36IqjRhqoyFMzivtpuG6s6LeKmNBsO1mnqAYRiNAonWmbYsaD4EioLijtmW3jPPS/fYpDVdgF+dTvvcY70Fh5Q8pf9H0KEhjFDtQVjw6MN3X3NcdCtr5WFoPKtZXoDJ3GKaddnUTk6jhfy+nzZoommwsWyI8iKoOg/21B8FsXs8NVN/BzxUKYq9pxx6hT/EJCO5kQMXRbVi8u9XqnjesGMiSbFwtZBQLH3A6KAOMza47C40Dh2wXe+uLNrQEqJ1Ma/bzy7QKH0M7BoQ3FJ1xeOHXyLj9UlVSoPScgdcpc3NEWQbDrX7WGV3fYGn9BDsbvVS2q2KPLgXWKTlHX93EMLi6WxbMsNo7hNXhPySy2RqOdVOuym0g+xaWWLV+Jn8j7KLWBJDn+67/oexMe2HyddNuCgo9U778mDZIWFOYmBitdL39rygBU2iIYO4jX0IxR3pxVBEw=
  - secure: HrvOSmZtwrH66G9sFYX5TASw11Wx0yiyCgDPcJ9nV8GiPDelrdQE4YEzdUWzuO4pRZDOm8GgIxmNhKMLahLbRFoKqANZQgmbrvEfIw1RkhHuVm41fu06S/8zkdPvxLJ6MOxTcrxKrYPMi8FE/Pyg6u6ek5p58VUoZ35B493tIzpQlyfL/Q9LUaI83r5+hDKfrFTZX8Y341ilKA/wigBw8e++EoHw3uxYaekLR2YVPSFrcX/cZfClJgMgywx/hNOdDYL4P2lVmhsG0vHoe/iVQRkopXDErTM2kR08pn8Dn8NaNVEGk85yAg4e8i9Uh5jqpir7OYy2I6Uks13NgGPkuAcxGfvPg8pbdjpo9RLdXCEnvWmUeYRMDy+jk7nx8QjsOVhhIHYOPRBQWirup5sf4mMRx/zRiagnGJ86gxcbScuau1Gt+yTf3nULAjJ0cA2UqtgJ9XzcyQo3I5FdJCcTd6PS9nPJf7lfMW7i4xV1IwIDtk1uOl9xm9dq1pe37Nvc2Yo8yqlNbuQfKe+6O0S6hSvDb54wH95u/pGr3q+ibtCIgT6oZORJDFD0nAuIcsLflObqYhY6O+zlcXdeKEaSZ9gIM+hKR2nTylS2vNE8mO1Sgk90hT4OaISBsxlWe+0VFDFbc/iBEINtVOfS6dUroy5s9trwTxi0qN93RtoZPzQ=
  - secure: O0ZxoGlZCRSW0y+q7s3vuY+uL8R75bOuzChMqqq20B1CCUHK/NnTDWVtqIWFTkdau8XgenVhAD+tHZiVIkOtapWEgabl12LTpyiHkYwxb7txsvKGYH8mytleFJNRU5adSMKYDpIWFaFZPHpbG/QfzRrgHR5tkrjbJU/X1NaqoGGe4fyj8p70kjlN0F1GkzEIULdlNLstW2Ka0Qrx+5OrPOoEsnX5zav8TaVaNDYqhZwzu6hQ8lUp8tU+da9YXrzhNktkE9ZknumNEB0yoCLUhkigfIOUzlb3IYfsAGpUEboYTrKyOGuP8PNyJOr5OevaIfQFupoM8thrUXDL3wYZSVD7QqYSzZAHgJtEeN0eXA/0E6kkl4zb+59QUxvUIrebHoHDQxIgsnCwxtxv4N5msLjVHSzt9M5TvxPVQNbPWmO6xHOaycV+ghf3sv5U7kiiHVh+dnae+CFnGECZTKNT96Svv1ZO/IepH30pxe6Kkjt2YYIsZN5/lJIMe/tP1HxQaTVKLqmd+xoM4Tb5ObY/tQajNZkU+0BqzP+faEUMO5JDmzrFP+sUqFV+7aeOZ+1M/wKCQZEh0ud2TMdzKnXfxIU3HvarCGxzLNVw6JtfFvqbxVfgGeMVQEUqwLa0KcdKUaAgxZGdH7pJuu9EmmtZUkUQEvH9XWcOs3D9HhukrhI=
  - secure: oJKXpCosPWsyTAMtQUtCk3ZjSa9uKh4hLmyzxKA0ZzUYCOESg0j8X1E/n0I0vNcw075x1UprdS7wB/1/sTQtLSqWqpT12Vtie4B6n1Gl72CDQjb7qvHVgzRamDCkD+YV1JovjHhve1gdFU4mGm9nPIue6XMNK5AIjtpHk2SYEjka92LicE9YxVFdzuL+oZI4XWjQ9xaVeX0yyW9OPpnMG9Ge4zD9pG45mfpe30SdtiPBkXugnVhmIo1P0XOo80ebHpWtS56tMDPUcbrEzeJ+vkpJmgB0Dq09knZ2N/vx3kzjwsqKTFC59S0bxNBuUwyLF9jE15SHo8KbS3ZyvIp03+T+6UWwhGq6PM3iwjL+ltq9rPvpQkj6SwyLAjxSMWwX2vu/CEsdV2C9jz5CbFx98NYClsDK9cFw8Bkuz20ilW+SeJhMmR208HRTq8NcZjMa4r347pn8YRnMSBH3B3MKeWNtQvesvYdnEBjGEtZSPmkDJlwfoyiduU7RRWx51zRl5psKqTSwbSjZlkyVitgwI7MtNpU+EGTuKeutznvijoEl+M2TSTTX+lFc/iRwY/Nh/iWMO8FnLMK3Tu75Of1BEhd0HxzE9Pc/Em6KvlzlfSLmrHfwGC+WHDB7XTUVSqYMa4dgygQYmKrbq47J5be/+d+gOhfnNbI/TfsaMDyfCAI=
  - secure: ievOci4GxNMEDOTPoFisyvmi0TasJyhMfUavXo30u05Zfld8dH0LBkVdO2XpoSEEneCaK8Y+y48fpmrudAvOz9c4a+TyImgpQd7/q7BY+FyerX0xKzmDfs2bbfFjgms6XRAP5EAaC2sBnPOCQ4KtNcwOeI7muivSudKhF6QVqNf7r2fiJO17dBoVClsNaybxtJ450ie8hWeCtad2dOkj17RqTgeplxRfiBA1rMYiNV1S5P1IelCl3COMEbV2hmlUzLzO36KAypoaG1NRGUh+BllSOujmJmRKLmNoHUZf9ci81yrh/OTiB3J6YR/nQDL5A5fEsbQdMaJL0HdGnl8RmmNnfKhVZEh7t3tWN0+lzGG/rbTD3GRdojq9SRsqHJH4zahdWRrEe7MgVzKadf5H4KjqRT/glO/e7SIJKelHeWv7dDLgC++w3QEJlM5/f2G8ast+3PfZMPhYmTjGUItBrsFxQPJIwqSh8RB96IR2fi3WLMJBra4hCL+hu20BsbD6M2w3XR7s6Cxb7GshnFMvv4L+bAwFBh3OVvgIFbqds2ch4r2AZqlLD36G3xyQsbpdc9ubwHzBjUHYIaSY7ND8HiaeXCoAC0fubDozLVI1pUcCRtTYLv3MojZdA9aR45ao9YLVY+1+BYrO8Djzvp0TD8CeWnlA204D/srU+Pp41uI=
  - secure: LsezWxfIBI1vOskvv3D3iD/dbfEI483/JV/JdKBK5VFlo5ABl+IIGOfNPoEsDbKSYxxEPd9Z9BMtkgDUJqaSFHFL+vfXc5s7CnufOTbvjnGhlnzsCghYEqE7bq/+415UXkWoJOTNSvDyERiY6+goj2hosoL3hcYjIaktMp3d1E0IVMuCRBDdNuFD/DlyWu7Fo0bKQf4/PzS8OG3ED+8k3yeGLZRWX/zMK1GFYlp1h5XUy2cJFL/65VAO59iiUwlh2J3nABHDgfitCAWjopVGc3XG8kOEDnnw0bNbTc41CDRBtSAz5bz4rNYJkA0f4UykrzJYAAJEVgxKtYUG8Y4bixo2TM3dpMSov2so3JFHqBwXUTv2JKJWfMar+/hsLpDiEUXp+3cK/eUjgahYiTGIiqP+tAgVA3TR2VjYS1TNWvN0iZetUMAK4flJsoGwK7UNLmM9WU9lWnnjdU/B5ATUQJ7yr/lF7kUmeMpkKyRuQIVBe4L10WWfYzz2AmjMGudimnCt5vKT4Qt88uf9eBQNviGbbHbg+r9iattdpAeLIUcQVF3sVEHFHOzMQto2oukU/1IyxMAB1F4yzpwcya9Aa1oXvHof7IwucWTj+ODKfngG/lQ+Q48UZqI7dm3EUc2WxNWsp1VLku7o9MWhn5iynzqLA0woX9tIFfRzgAw58+E=
before_install:
- wget https://releases.hashicorp.com/terraform/${VERSION}/terraform_${VERSION}_linux_amd64.zip
- unzip terraform_${VERSION}_linux_amd64.zip -d $HOME/bin
- chmod +x $HOME/bin/terraform
- export AWS_ACCESS_KEY_ID=$DEPLOYMENT_ACCESS_KEY_ID
- export AWS_SECRET_ACCESS_KEY=$DEPLOYMENT_SECRET_ACCESS_KEY
- export AUTHOR_NAME="$(git log -1 $TRAVIS_COMMIT --pretty="%aN")"
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
jobs:
  include:
  - stage: test
    install:
    - eval $(aws sts assume-role --role-arn "$OPERATIONS_ROLE_ARN" --role-session-name "${TRAVIS_REPO_SLUG//\//-}" | jq -r '.Credentials | @sh "export AWS_SESSION_TOKEN=\(.SessionToken)\nexport AWS_ACCESS_KEY_ID=\(.AccessKeyId)\nexport AWS_SECRET_ACCESS_KEY=\(.SecretAccessKey) "')
    - ./gradlew assemble
    - export AWS_ACCESS_KEY_ID=$DEPLOYMENT_ACCESS_KEY_ID
    - export AWS_SECRET_ACCESS_KEY=$DEPLOYMENT_SECRET_ACCESS_KEY
    - unset AWS_SESSION_TOKEN
    script:
    - cd deployment/terraform/ecr
    - terraform init -backend-config="bucket=${STATE_S3_BUCKET}" -backend-config="region=${AWS_DEFAULT_REGION}" -backend-config="dynamodb_table=${STATE_DYNAMODB_TABLE}" -backend-config="kms_key_id=${KMS_KEY_ID}" -backend-config="key=${KEY}" -backend-config="role_arn=${ROLE_ARN}" 1>/dev/null || exit 1
    - terraform apply -backup="-" -input=false -auto-approve -var role_arn=${ROLE_ARN} -var service_name=${SERVICE_NAME} -var tags="{\"AuthorName\":\"${AUTHOR_NAME}\",\"GitRepository\":\"${TRAVIS_REPO_SLUG}\"}" 1>/dev/null || exit 1
    - REPOSITORY_URI=$(terraform output repository_url)
    - cd $TRAVIS_BUILD_DIR
    - eval $(aws sts assume-role --role-arn "$OPERATIONS_ROLE_ARN" --role-session-name "${TRAVIS_REPO_SLUG//\//-}" | jq -r '.Credentials | @sh "export AWS_SESSION_TOKEN=\(.SessionToken)\nexport AWS_ACCESS_KEY_ID=\(.AccessKeyId)\nexport AWS_SECRET_ACCESS_KEY=\(.SecretAccessKey) "')
    - $(aws ecr get-login --no-include-email)
    - ./gradlew check docker dockerTag dockerPush dockerTagsPush publish -PTAG=$TRAVIS_BUILD_NUMBER -PREPOSITORY_URI=$REPOSITORY_URI
    after_success:
    - ./gradlew sonarqube
  - stage: deploy to development
    env:
    - TF_WORKSPACE=development
    - SPLUNK_TOKEN=
    - secure: nmuSCIxhq7lJlJ+nu0S8sTF/eYs0EMgEodfl8TwJD50DoFSD8w20vBJW3uFgzMK5XccenUGicZQhRy7HC1waFT2Pu4XHr23xgKlL67UJMsL+pzRLzFuIqXyd7t//KiTGiOHVP8xoS6O2rc1c09CqMg5K6JrlgFxgLi8mnbOveMnSOhRbDIPmbhfaX/xBdj1/Thy4BaHxohLTMd/h+nPosG/9y5aeKi/cieKuRqUAkWgQT56p0TT+bpO3Q+gY6CY0feoariloBSJWiHo0YKmiRGqQd9819dMq6roZjonEB8qJb/YygcJJwwAx/IkRt3Rs6pZhY4UVVLgw4eyjVg4LQ7kl1FuTJWAq5qT6LmCZf+Ec+GYvjUsNTrY9A+wpmhh9Xf6P3XQgI4nGcm5nqh+0UmPhkBZW4YgYWV2SSU1BkdzxG6PiZpB4RWImek7xwvyudPQFCx5bX0gxiKd7QNkS3bEHQjcLJnjVtOsY35iTwdtJlu4zBaHO4z2YWoXet7hzGRL9ZsqmSu5iIjx95Pg1Lc5GFYNKaj06sYPQkiwNrgikbX279gnFkljygrBykcysBSl7l9noQVf9D0oNBecqMPsy6wOV7j1O6ElBxKw5c2EZoiOXkU9B9huyU9QY2DGgY1YBpXxI9hsJQqHpPnpVDBw1PgPWfL2DoErPK+MeiUM=
    install: skip
    script: skip
    deploy:
      skip_cleanup: true
      provider: script
      script: bash deployment/script/travis_deploy.sh
      on:
        all_branches: true
  - stage: deploy to production
    if: env(DEPLOY_PRODUCTION) IS present
    env:
    - TF_WORKSPACE=production
    - SPLUNK_TOKEN=
    - secure: Nyl2YPIjXzhXjum+rYBBf+jQbgTz5Mnw/tgvJhggOldHViRufNew5X8rLnpY3wJieoyqgmE2NjUMbx0ZLREQwjhndG5l2txeqknjyYjKaMAoN0mSju7gRtUSIHNvJhLQ0pqejus80f7G1ejbInXeuJNFrx0mx2Z3kP00FRCSgSXiABlXdUv1kDk2un4x+9SDTHz3fmfFH+6ccbAAhm6ns/91bKxvBJZfBlW7aQRVD6cnauZbbrzQpwLPV2qmxuYeg0CLaf4vSnQPOx6abmDLBliPlILRoQjJ1vGdpCIwXExDThAOB9dvhBunGxWgPB2Gqe0hFMPx6wkdinsoFkrUKzHy3CmFjJgCNfgJktSQEfYduCD6dfSdVrZ4kljvMf1taDqEw7vjoQoXxkaftZUxbhMrjrnIqt1SGSxvdQZCKjwxxwiMYXwlMWM1HLdTlPsN569dTOr74C82U9fCPd2IBTLWrAcJ5bKbcVUyP9hI54zaowB6IQju1yTidmuptRfWr/G0ozmdoTVCHMgxF1U8wGzxsGlWrMGW6mDLZfEs/Cq53RiSUNC+NGhGN9TTFIX6qQr/P85kPDhIgqG8/SXxW+rDaknfhnm0UsR1mPhNEOIa9beEIM1/LmszkCFOsr4Eilm+J05lGOseVASoOFDlY/2oZI3ZGLzJzLuWZCnwswY=
    install: skip
    script: skip
    deploy:
      skip_cleanup: true
      provider: script
      script: bash deployment/script/travis_deploy.sh
      on:
        branch: master
notifications:
  slack:
    secure: S4Pg6XK5x3pfxldRNJVMuzLfPzKVsGdogr0u0r/pu5dpjJujoecsuDoPS8syej1hZRqJOxK36Ms+NDXRzHNK6w95X69kgwDjzoI3PoKmnqyBJIcgSueyNbm7KoQGgoKTOgEUHZ0A9JbcdH8ThBHUR8wltXctGd3kEp8KC3wSlXzDmLeFJPTqC8DMBmSC00nVL7LtXj4VdOwYZnERKErjjx5f+msOhCNbAXLr7p12O7ewHDhL1jaex4r4yzG8+oevDKYNgpHyd8BCsgsCnjiKewByiVB9q4GBjE6CN3c1VfKdWmPWwF4jgxsz8BqTjshM17msnRyXOaSsB6MG+gGMyNKwFVYEwlsAQyRl5i5IhvjIHVMZVcbon098CpNcpW/ZsWALVQSZUW8yBBVPfVs4gTI071R9hQvDWdHLEkApZpsD24tPwsXGdzupBceyqf3HZn9PDYnqMB+hDxSYmLoJRYqjdFxguUwZEYSRih0c+4npcCBO/QJ5m+4aoG2qJ7Zg10YPr3I/PU+kHKjMzvAME4iZ30CnW0gRskM7nVHZRVmR/vgweZDuo9GYXnOykUUur9S3OEhkEp6Ucmcnkv/DXRa5lU0gqpnfkcJv40UaqoxyypGn2U0dPHPCbYahvTu4QAAAkUU6RsJ3TlDhOg018lJVBBaLx+tXpTD+TpY7/XU=
addons:
  snaps:
  - name: aws-cli
    confinement: classic
    channel: latest/stable
  sonarcloud:
    organization: bnc-projects
    token:
      secure: Ehm9iNp6f5fBata+4mkkfwpUelmYZZAkmrakZ0jOsZn3Pw/e6+ZskxOWBdRZQxZbpsQ2QTxrunel4pNgjKpuj340OuDGQGb8it23VslTDuffpDguDkYVBe8RQER2TeJ5ZrcpYbTwNg0KUxwvvjSgbmwDogQkvXu6nxmGjcT+kcKMuVNBXSQrIPalKQNlq5Oga+IBfuqK0zhgRmsHq5LQVqjrn3dckXL7rtaqF7yXX8EIxaRXFzE36hjQlLB0b2OpT9ff6/Jx15kBgb0OYTwHOjhzg94UWljsW1u4Unl+B93drRV87HSmJN1kZZkzprixgvO+ERMaAwVsb3qqDb6qqhIS06uUZfmsV/lKOfoB2WEYA8KdS4oYUOuRULjrWBvhqA+dT/6QPHjSpgssVCfnuFsgw7vbyBuCZAifHmS0g9h/4+N40xYk4jw+L5jIDH72AdktD2o2qY+26lqw6XdxPPwKBrsBcElbYbfTdw/VMYlA9yoOFx5mlRUxhv0Jxt7u5ZD5FmE7H9XleTNnmO13dhcRfEZvUpEWa1Ccn5ueq/03kbXLIaZ6I0LM8ONK/qEqUmY12Ztf7QFs94HED54N62o+5fohbURsxVDE286VO1alUqgOVLOt7dd+X4JhDdu2ix4jHjPsan40eAy6e6FxFn4xsQF5BGPrFvDbCsvP6ok=
